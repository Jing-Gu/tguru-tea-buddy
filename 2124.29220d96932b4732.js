"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2124],{2124:(S,h,a)=>{a.r(h),a.d(h,{NoteListComponent:()=>O});var C=a(467),t=a(4438),v=a(177),_=a(8986),d=a(4341),s=a(9921),b=a(5079),m=a(5873);const g={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let u;const y=new Uint8Array(16);function k(){if(!u){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");u=crypto.getRandomValues.bind(crypto)}return u(y)}const l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));const L=function x(e,n,r){if(g.randomUUID&&!n&&!e)return g.randomUUID();const o=(e=e||{}).random||(e.rng||k)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){r=r||0;for(let i=0;i<16;++i)n[r+i]=o[i];return n}return function f(e,n=0){return(l[e[n+0]]+l[e[n+1]]+l[e[n+2]]+l[e[n+3]]+"-"+l[e[n+4]]+l[e[n+5]]+"-"+l[e[n+6]]+l[e[n+7]]+"-"+l[e[n+8]]+l[e[n+9]]+"-"+l[e[n+10]]+l[e[n+11]]+l[e[n+12]]+l[e[n+13]]+l[e[n+14]]+l[e[n+15]]).toLowerCase()}(o)};var j=a(7291);function F(e,n){if(1&e){const r=t.RV6();t.j41(0,"ion-item-sliding")(1,"ion-item",11)(2,"ion-label",12)(3,"p",13),t.EFF(4),t.k0s(),t.j41(5,"p",14),t.EFF(6),t.k0s()()(),t.j41(7,"ion-item-options",15)(8,"ion-item-option",16),t.bIt("click",function(){const i=t.eBV(r).$implicit,c=t.XpG(3);return t.Njj(c.onDeleteNote(i.uuid))}),t.nrm(9,"ion-icon",17),t.k0s()()()}if(2&e){const r=n.$implicit;t.R7$(),t.FS9("routerLink",r.uuid),t.R7$(3),t.JRh(r.title||"Sans titre"),t.R7$(2),t.JRh(r.content)}}function T(e,n){if(1&e&&(t.j41(0,"ion-list"),t.DNE(1,F,10,3,"ion-item-sliding",10),t.k0s()),2&e){const r=t.XpG(2);t.R7$(),t.Y8G("ngForOf",r.sortedNotes)}}function D(e,n){1&e&&(t.j41(0,"div",9),t.nrm(1,"ion-icon",18),t.j41(2,"p",19),t.EFF(3,"Commencez \xe0 \xe9crire votre note de th\xe9."),t.k0s()())}function G(e,n){if(1&e&&t.DNE(0,T,2,1,"ion-list")(1,D,4,0,"div",9),2&e){const r=t.XpG();t.vxM(r.sortedNotes.length>0?0:1)}}function R(e,n){1&e&&t.nrm(0,"ion-progress-bar",3)}function U(e,n){if(1&e){const r=t.RV6();t.j41(0,"ion-header",20)(1,"ion-toolbar")(2,"ion-buttons",21)(3,"ion-button",22),t.bIt("click",function(){t.eBV(r);const i=t.XpG();return t.Njj(i.onCloseModal())}),t.nrm(4,"ion-icon",23),t.k0s()(),t.j41(5,"ion-buttons",24)(6,"ion-button",25),t.bIt("click",function(){t.eBV(r);const i=t.XpG();return t.Njj(i.onToggleBookmark())}),t.nrm(7,"ion-icon",26),t.k0s()()()(),t.j41(8,"ion-content")(9,"div",27),t.nrm(10,"ion-textarea",28)(11,"ion-textarea",29),t.k0s()()}if(2&e){const r=t.XpG();t.R7$(7),t.Y8G("name",r.pinned?"star":"star-outline")}}let O=(()=>{var e;class n{constructor(){this.fb=(0,t.WQX)(d.ok),this.alertController=(0,t.WQX)(s.hG),this.storageService=(0,t.WQX)(j.n),this.isModalOpen=!1,this.pinned=!1,this.noteForm=this.fb.group({uuid:[L()],title:[""],content:[""],pinned:[!1],created:[""],modified:[null]}),this.notes$=this.storageService.noteListObs,this.sortedNotes=[],(0,b.a)({createOutline:m.hmR,chevronBackOutline:m.fKZ,starOutline:m.zV,star:m.d49,saveOutline:m.oc8,trash:m.dco,fileTrayOutline:m.PC0})}ngOnInit(){this.storageService.getAllNotes(),this.storageService.noteListObs.subscribe(o=>{this.sortedNotes=this.sortItems(o)})}sortItems(o){return o.sort((i,c)=>{const p=new Date(i.created).getTime();return new Date(c.created).getTime()-p})}submitNote(){this.noteForm&&(this.noteForm.patchValue({created:new Date}),this.storageService.addNote(this.noteForm.value).then(o=>{this.storageService.getAllNotes()}),this.isModalOpen=!1,this.noteForm.reset())}deleteNote(o){this.storageService.deleteNote(o).then(i=>{this.storageService.getAllNotes()})}presentAlert(o){var i=this;return(0,C.A)(function*(){yield(yield i.alertController.create({message:"\xcates-vous s\xfbr de vouloir supprimer cette note ? ",backdropDismiss:!0,mode:"md",cssClass:"alertbox",buttons:[{text:"Annuler",role:"cancel",cssClass:"btncancel"},{text:"Supprimer",role:"confirm",cssClass:"btnconfirm",handler:()=>{i.deleteNote(o)}}]})).present()})()}onAddNewNote(){this.isModalOpen=!0}onDeleteNote(o){this.presentAlert(o)}onToggleBookmark(){var o;this.pinned=!this.pinned,null===(o=this.noteForm)||void 0===o||o.patchValue({pinned:this.pinned})}onCloseModal(){if(this.noteForm){var o,i;const p=null===(o=this.noteForm.get("title"))||void 0===o?void 0:o.value,N=null===(i=this.noteForm.get("content"))||void 0===i?void 0:i.value;var c;p||N?this.submitNote():(this.isModalOpen=!1,null===(c=this.noteForm)||void 0===c||c.reset())}}}return(e=n).\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["app-note-list"]],standalone:!0,features:[t.aNF],decls:14,vars:5,consts:[["mode","md",1,"ion-no-border",3,"translucent"],[3,"fullscreen"],[1,"h-full","overflow-y-auto"],["type","indeterminate","color","tertiary"],[3,"formGroup"],[3,"isOpen"],["vertical","bottom","horizontal","end","slot","fixed"],["color","tertiary",3,"click"],["name","create-outline"],[1,"flex","flex-col","items-center","gap-8","mt-[50%]","mx-8"],[4,"ngFor","ngForOf"],["button","","mode","ios",3,"routerLink"],[1,"overflow-hidden"],[1,"!text-charcoal","capitalize"],[1,"line-clamp-2"],["side","end"],["color","danger",3,"click"],["slot","icon-only","name","trash","color","light"],["name","file-tray-outline","color","secondary",1,"w-12","h-12"],[1,"text-center"],[1,"ion-no-border"],["slot","start"],[3,"click"],["name","chevron-back-outline"],["slot","end"],["color","primary",3,"click"],[3,"name"],[1,"px-8"],["placeholder","Titre","autoGrow","true","formControlName","title",1,"font-semibold","text-xl"],["placeholder","Commencez ici votre id\xe9e...","autoGrow","true","formControlName","content"]],template:function(o,i){1&o&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Carnet de notes"),t.k0s()()(),t.j41(4,"ion-content",1)(5,"div",2),t.DNE(6,G,2,1)(7,R,1,0,"ion-progress-bar",3),t.k0s()(),t.j41(8,"form",4)(9,"ion-modal",5),t.DNE(10,U,12,1,"ng-template"),t.k0s()(),t.j41(11,"ion-fab",6)(12,"ion-fab-button",7),t.bIt("click",function(){return i.onAddNewNote()}),t.nrm(13,"ion-icon",8),t.k0s()()),2&o&&(t.Y8G("translucent",!0),t.R7$(4),t.Y8G("fullscreen",!0),t.R7$(2),t.vxM(i.sortedNotes?6:7),t.R7$(2),t.Y8G("formGroup",i.noteForm),t.R7$(),t.Y8G("isOpen",i.isModalOpen))},dependencies:[s.A7,s.LU,s.CE,s.QW,s.Jm,s.Sb,s.iq,s.YW,s.Q8,s.nf,s.he,s.nc,s.uz,s.W9,s.eU,s.BC,s.ai,s.FH,v.MD,v.Sq,_.Wk,d.YN,d.qT,d.BC,d.cb,d.X1,d.j4,d.JD]}),n})()}}]);
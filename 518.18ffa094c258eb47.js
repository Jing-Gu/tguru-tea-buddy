"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[518],{518:(C,c,r)=>{r.r(c),r.d(c,{TimerComponent:()=>b});var e=r(4438),_=r(177),p=r(8986),l=r(9921),m=r(5873),u=r(5079),d=r(4082);const h=i=>({animate:i});function f(i,s){if(1&i&&(e.j41(0,"div",1)(1,"div",12),e.nrm(2,"ion-icon",13),e.j41(3,"p"),e.EFF(4),e.j41(5,"span",14),e.EFF(6,"g"),e.k0s()()(),e.j41(7,"div",12),e.nrm(8,"ion-icon",15),e.j41(9,"p"),e.EFF(10),e.j41(11,"span",14),e.EFF(12,"ml"),e.k0s()()(),e.j41(13,"div",12),e.nrm(14,"ion-icon",16),e.j41(15,"p"),e.EFF(16),e.j41(17,"span",14),e.EFF(18,"\u02daC"),e.k0s()()()()),2&i){const o=e.XpG();e.R7$(4),e.JRh(o.tea.teaAmount),e.R7$(6),e.JRh(o.tea.waterAmount),e.R7$(6),e.JRh(o.tea.temperature)}}function g(i,s){if(1&i){const o=e.RV6();e.j41(0,"ion-button",17),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.startTimer())}),e.EFF(1," Commencer "),e.k0s()}}function T(i,s){if(1&i){const o=e.RV6();e.j41(0,"ion-button",18),e.bIt("click",function(){e.eBV(o);const t=e.XpG();return e.Njj(t.resetTimer())}),e.EFF(1," Reset "),e.k0s()}}let b=(()=>{var i;class s{constructor(){this._brewService=(0,e.WQX)(d.M),this._router=(0,e.WQX)(p.Ix),this.brewingTime="",this.timerIsOff=!0,this.isAlertOpen=!1,this.isAnimating=!1,this.alertButtons=[{text:"Ok",role:"cancel",handler:()=>{this.resetTimer()}}],(0,u.a)({leafOutline:m.nNF,waterOutline:m.MQo,thermometerOutline:m.LwS})}ngOnInit(){this.tea=this._brewService.getCurrentTea(),this.checkDefaultBrewTime(this.tea.brewTime)}checkDefaultBrewTime(n){let t,a;n<60?(t=0,a=n):(t=Math.floor(n/60),a=n%60),this.brewingTime=`${t<1?"0":""}${t}:${a<10?"0":""}${a}`}displayTimeLeft(n){const t=Math.floor(n/60),a=n%60;this.brewingTime=`${t<1?"0":""}${t}:${a<10?"0":""}${a}`}startTimer(){this.timerIsOff=!1,this.isAnimating=!0;let n=1e3*this.tea.brewTime;this._interval=setInterval(()=>{n-=1e3;const t=Math.max(0,n/1e3);this.displayTimeLeft(t),n<=0&&(clearInterval(this._interval),this.isAlertOpen=!0,this.isAnimating=!1,this._playCompletionSound())},1e3)}resetTimer(){this.timerIsOff=!0,this.isAnimating=!1,clearInterval(this._interval),this.checkDefaultBrewTime(this.tea.brewTime)}cancelTimer(){this.resetTimer(),this._router.navigate(["../"])}setOpen(n){this.isAlertOpen=n}_playCompletionSound(){}}return(i=s).\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-timer"]],standalone:!0,features:[e.aNF],decls:15,vars:11,consts:[[1,"h-full","p-4","flex","flex-col","justify-between"],[1,"flex","flex-row","justify-between","px-4"],[1,"text-xl","font-bold","text-center","text-sencha"],[1,"flex","flex-col","items-center","gap-4"],[1,"loader",3,"ngClass"],["alt","",3,"src"],[1,"text-6xl","font-bold","text-center","text-sencha"],[1,"flex","flex-col","gap-4"],["color","primary","expand","block","shape","round"],["color","secondary","expand","block","shape","round"],["color","primary","expand","block","shape","round","fill","outline",3,"click"],["header","Votre th\xe9 est pr\xeat","message","Bon d\xe9gustation !",3,"didDismiss","isOpen","buttons"],[1,"flex","flex-col","items-center","gap-2"],["name","leaf-outline"],[1,"ml-2"],["name","water-outline"],["name","thermometer-outline"],["color","primary","expand","block","shape","round",3,"click"],["color","secondary","expand","block","shape","round",3,"click"]],template:function(n,t){1&n&&(e.j41(0,"div",0),e.DNE(1,f,19,3,"div",1),e.j41(2,"h1",2),e.EFF(3),e.k0s(),e.j41(4,"div",3)(5,"span",4),e.nrm(6,"img",5),e.k0s(),e.j41(7,"p",6),e.EFF(8),e.k0s()(),e.j41(9,"div",7),e.DNE(10,g,2,0,"ion-button",8)(11,T,2,0,"ion-button",9),e.j41(12,"ion-button",10),e.bIt("click",function(){return t.cancelTimer()}),e.EFF(13," Annuler "),e.k0s()()(),e.j41(14,"ion-alert",11),e.bIt("didDismiss",function(){return t.setOpen(!1)}),e.k0s()),2&n&&(e.R7$(),e.vxM(t.tea.teaAmount&&t.tea.waterAmount&&t.tea.temperature?1:-1),e.R7$(2),e.JRh(null==t.tea?null:t.tea.label),e.R7$(2),e.Y8G("ngClass",e.eq3(9,h,t.isAnimating)),e.R7$(),e.Mz_("src","assets/icon/",null==t.tea?null:t.tea.icon,"",e.B4B),e.R7$(2),e.SpI(" ",t.brewingTime?t.brewingTime:"_ _ : _ _"," "),e.R7$(2),e.vxM(t.timerIsOff?10:11),e.R7$(4),e.Y8G("isOpen",t.isAlertOpen)("buttons",t.alertButtons))},dependencies:[l.Zy,_.MD,_.YU,l.iq,l.Jm],styles:['ion-icon[_ngcontent-%COMP%]{padding:.5rem;border-radius:50px;background-color:var(--bencha);color:var(--sencha);width:26px;height:26px}ion-button[_ngcontent-%COMP%]{height:auto;margin:0 3rem;text-transform:capitalize;font-size:1rem}ion-button[_ngcontent-%COMP%]::part(native){box-shadow:none;padding:1rem 2rem}.loader[_ngcontent-%COMP%]{width:140px;height:140px;display:inline-block;position:relative}.loader[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10}.loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{content:"";box-sizing:border-box;width:140px;height:140px;border-radius:50%;background:transparent;border:2px solid var(--bencha);position:absolute;left:0;top:0}.loader[_ngcontent-%COMP%]:after{animation-delay:1s}.loader.animate[_ngcontent-%COMP%]:before{border:6px solid var(--sencha);animation:_ngcontent-%COMP%_animloader 2s linear infinite}.loader.animate[_ngcontent-%COMP%]:after{background:var(--sencha);animation:_ngcontent-%COMP%_animloader 3s linear infinite}@keyframes _ngcontent-%COMP%_animloader{0%{transform:scale(0);opacity:1}to{transform:scale(1);opacity:0}}']}),s})()}}]);
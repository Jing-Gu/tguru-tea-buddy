"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5413],{5413:(M,d,n)=>{n.r(d),n.d(d,{NoteDetailsComponent:()=>N});var p=n(467),t=n(4438),_=n(177),a=n(4341),m=n(8986),l=n(9921),h=n(6354),f=n(5558),D=n(5079),u=n(5873),E=n(7291);function v(i,c){if(1&i&&(t.j41(0,"p"),t.EFF(1,"Modifi\xe9: "),t.j41(2,"span"),t.EFF(3),t.nI1(4,"date"),t.k0s()()),2&i){const r=t.XpG();t.R7$(3),t.JRh(t.i5U(4,1,r.modified,"MM/dd/yyyy"))}}function C(i,c){if(1&i){const r=t.RV6();t.j41(0,"form",0)(1,"ion-header",1)(2,"ion-toolbar")(3,"ion-buttons",2)(4,"ion-back-button",3),t.bIt("click",function(){const o=t.eBV(r),s=t.XpG();return t.Njj(s.onUpdateNote(o.uuid))}),t.k0s()(),t.j41(5,"ion-buttons",4)(6,"ion-button",5),t.bIt("click",function(){t.eBV(r);const o=t.XpG();return t.Njj(o.onToggleBookmark())}),t.nrm(7,"ion-icon",6),t.k0s(),t.j41(8,"ion-button",5),t.bIt("click",function(){const o=t.eBV(r),s=t.XpG();return t.Njj(s.onDeleteNote(o.uuid))}),t.nrm(9,"ion-icon",7),t.k0s()()()(),t.j41(10,"div",8),t.nrm(11,"ion-textarea",9)(12,"ion-textarea",10),t.j41(13,"div",11)(14,"p"),t.EFF(15,"Cr\xe9\xe9: "),t.j41(16,"span"),t.EFF(17),t.nI1(18,"date"),t.k0s()(),t.DNE(19,v,5,4,"p"),t.k0s()()()}if(2&i){const r=c,e=t.XpG();t.Y8G("formGroup",e.noteForm),t.R7$(7),t.Y8G("name",e.pinned?"star":"star-outline"),t.R7$(10),t.JRh(t.i5U(18,4,r.created,"MM/dd/yyyy")),t.R7$(2),t.vxM(r.modified?19:-1)}}let N=(()=>{var i;class c{constructor(){this.storageService=(0,t.WQX)(E.n),this.route=(0,t.WQX)(m.nX),this.router=(0,t.WQX)(m.Ix),this.fb=(0,t.WQX)(a.ok),this.alertController=(0,t.WQX)(l.hG),this.currentNote$=this.storageService.currentNoteObs,this.noteForm=this.fb.group({uuid:[""],title:[""],content:["",a.k0.required],pinned:[!1],created:[""],modified:[""]}),(0,D.a)({trashOutline:u.P1A,chevronBackOutline:u.fKZ,starOutline:u.zV,star:u.d49})}setFormValues(e){var o;e&&(this.noteForm.setValue({uuid:e.uuid,title:e.title,content:e.content,pinned:e.pinned,created:e.created.toISOString(),modified:(null===(o=e.modified)||void 0===o?void 0:o.toISOString())||null}),this.pinned=e.pinned)}deleteNote(e){this.storageService.deleteNote(e).then(o=>{this.router.navigateByUrl("tabs/note"),this.storageService.getAllNotes()})}ngOnInit(){this.route.params.pipe((0,h.T)(e=>e.uuid),(0,f.n)(e=>this.storageService.getNoteByUuid(e))).subscribe(e=>this.setFormValues(e))}onToggleBookmark(){this.pinned=!this.pinned}onUpdateNote(e){this.noteForm.touched&&this.noteForm.dirty&&this.storageService.updateNote(e,{title:this.noteForm.value.title,content:this.noteForm.value.content,pinned:this.pinned,modified:new Date}).then(g=>{this.storageService.getAllNotes()})}onDeleteNote(e){this.presentAlert(e)}presentAlert(e){var o=this;return(0,p.A)(function*(){yield(yield o.alertController.create({message:"\xcates-vous s\xfbr de vouloir supprimer cette note ? ",backdropDismiss:!0,mode:"md",cssClass:"alertbox",buttons:[{text:"Annuler",role:"cancel",cssClass:"btncancel"},{text:"Supprimer",role:"confirm",cssClass:"btnconfirm",handler:()=>{o.deleteNote(e)}}]})).present()})()}}return(i=c).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.VBU({type:i,selectors:[["app-note-details"]],standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"h-full","flex","flex-col","overflow-hidden",3,"formGroup"],["mode","md",1,"ion-no-border"],["slot","start"],["defaultHref","tabs/note","icon","chevron-back-outline",3,"click"],["slot","end"],[3,"click"],["color","primary",3,"name"],["name","trash-outline","color","danger"],[1,"flex-1","flex","flex-col","overflow-auto","px-8"],["autoGrow","true","formControlName","title",1,"font-semibold","text-xl","flex-shrink-0"],["autoGrow","true","formControlName","content",1,"flex-shrink-0"],[1,"text-xs","text-bencha","my-4"]],template:function(e,o){if(1&e&&(t.DNE(0,C,20,7,"form",0),t.nI1(1,"async")),2&e){let s;t.vxM((s=t.bMT(1,1,o.currentNote$))?0:-1,s)}},dependencies:[l.nc,l.iq,l.Jm,l.eU,l.QW,l.ai,l.el,_.MD,_.Jj,_.vh,a.X1,a.qT,a.BC,a.cb,a.j4,a.JD]}),c})()}}]);